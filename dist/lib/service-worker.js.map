{"version":3,"sources":["../../lib/service-worker.js"],"names":["CACHE_VERSION","CURRENT_CACHES","resources","data","app","appModule","deleteOldCache","expectedCacheNames","Object","keys","map","key","deleteOld","cacheNames","cacheName","indexOf","caches","delete","then","Promise","all","self","addEventListener","event","waitUntil"],"mappings":"AAAA,aAEA,GAAMA,eAAgB,CAAtB,CACA,GAAMC,gBAAiB,CACnBC,UAAW,cAAgBF,aADR,CAEnBG,KAAM,SAAWH,aAFE,CAAvB,CAKA,GAAMI,KAAO,UAAY,CACrB,GAAMC,WAAY,CACdC,cADc,0BACG,CACb,GAAMC,oBAAqBC,OAAOC,IAAP,CAAYR,cAAZ,EAA4BS,GAA5B,CAAgC,SAASC,GAAT,CAAc,CACrE,MAAOV,gBAAeU,GAAf,CACV,CAF0B,CAA3B,CAIA,GAAMC,WAAYC,WAAWH,GAAX,CAAe,SAASI,SAAT,CAAoB,CACjD,GAAIP,mBAAmBQ,OAAnB,CAA2BD,SAA3B,IAA0C,CAAC,CAA/C,CAAkD,CAC9C,MAAOE,QAAOC,MAAP,CAAcH,SAAd,CACV,CACJ,CAJiB,CAAlB,CAMA,MAAOE,QAAOP,IAAP,GAAcS,IAAd,CAAmB,SAASL,UAAT,CAAqB,CAC3C,MAAOM,SAAQC,GAAR,CAAYR,SAAZ,CACV,CAFM,CAGV,CAfa,CAAlB,CAkBA,MAAOP,UACV,CApBW,EAAZ,CAsBAgB,KAAKC,gBAAL,CAAsB,UAAtB,CAAkC,SAASC,KAAT,CAAgB,CAC9CA,MAAMC,SAAN,CAAgBpB,IAAIE,cAApB,CACH,CAFD","file":"service-worker.js","sourcesContent":["'use strict';\n\nconst CACHE_VERSION = 1;\nconst CURRENT_CACHES = {\n    resources: 'resources-v' + CACHE_VERSION,\n    data: 'data-v' + CACHE_VERSION\n};\n\nconst app = (function () {\n    const appModule = {\n        deleteOldCache() {\n            const expectedCacheNames = Object.keys(CURRENT_CACHES).map(function(key) {\n                return CURRENT_CACHES[key];\n            });\n        \n            const deleteOld = cacheNames.map(function(cacheName) {\n                if (expectedCacheNames.indexOf(cacheName) === -1) {\n                    return caches.delete(cacheName);\n                }\n            });\n            \n            return caches.keys().then(function(cacheNames) {\n                return Promise.all(deleteOld);\n            });\n        }\n    };\n    \n    return appModule;\n})();\n\nself.addEventListener('activate', function(event) {\n    event.waitUntil(app.deleteOldCache);\n});\n"]}