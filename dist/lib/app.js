'use strict';var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if('value'in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError('Cannot call a class as a function')}}(function init(){'use strict';var noop=function noop(){return undefined};var DataLoader=function(){function DataLoader(){var _this=this;_classCallCheck(this,DataLoader);this.callback=noop;this.data={githubInfo:window.githubInfo||[]};fetch('https://api.github.com/users/sagiegurari/repos?type=owner&per_page=100').then(function(response){return response.json()}).then(function(apiData){if(apiData&&Array.isArray(apiData)&&apiData.length){_this.data.githubInfo=apiData;_this.callback(_this.data)}})}_createClass(DataLoader,[{key:'get',value:function get(listener){this.callback=listener;this.callback(this.data)}}]);return DataLoader}();var App=function(){function App(){_classCallCheck(this,App);this.dataLoader=new DataLoader}_createClass(App,[{key:'loadData',value:function loadData(callback){var _this2=this;this.dataLoader.get(function(data){//clone data
data=JSON.parse(JSON.stringify(data.githubInfo));_this2.repositories=data.sort(function(repo1,repo2){var output=repo2.stargazers_count-repo1.stargazers_count;if(!output){output=repo2.forks_count-repo1.forks_count}return output});for(var index=0;index<_this2.repositories.length;index++){if(!_this2.repositories[index].fork){_this2.ownerInfo=_this2.repositories[index].owner;break}}callback()})}}]);return App}();var app=void 0;var startup=function startup(){if(!app){app=new App;app.loadData(function onDataLoaded(){console.log({ownerInfo:app.ownerInfo,repositories:app.repositories})})}};document.addEventListener('DOMContentReady',startup);setTimeout(startup,0)})();//# sourceMappingURL=app.js.map
//# sourceMappingURL=app.js.map
